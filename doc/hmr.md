# ðŸ”¥ æ¨¡å—çƒ­æ›´æ–°

çƒ­æ›´æ–°é€šè¿‡åœ¨è¿è¡Œæ—¶æµè§ˆå™¨è‡ªåŠ¨æ›´æ–°æ¨¡å—è€Œä¸ç”¨åˆ·æ–°æ•´ä¸ªé¡µé¢æ¥æå‡å¼€å‘ä½“éªŒã€‚è¿™æ„å‘³ç€å½“ä½ æ”¹å˜äº†ä¸€äº›ç»†å°çš„ä¸œè¥¿æ—¶ï¼Œåº”ç”¨ç¨‹åºçš„çŠ¶æ€ä¼šè¢«ä¿ç•™ã€‚Parcel çš„ HMR å®žçŽ°æ”¯æŒå¯¹ JavaScript å’Œ CSS ä¸¤ç§èµ„æºå¼€ç®±å³ç”¨ã€‚åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼ŒHMR è‡ªåŠ¨åœæ­¢ã€‚

åœ¨ä½ ä¿å­˜æ–‡ä»¶æ—¶ï¼ŒParcel ä¼šé‡æ–°æž„å»ºæ”¹å˜çš„éƒ¨åˆ†å¹¶ä¸”æŠŠæ–°ä»£ç æ›´æ–°åˆ°æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¢æˆ·ç«¯ã€‚ç„¶åŽæ–°ä»£ç ä¼šæ›¿æ¢æŽ‰æ—§çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¸Žæ‰€æœ‰çˆ¶çº§ä¸€èµ·è¢«é‡æ–°è®¡ç®—ã€‚ä½ å¯ä»¥ç”¨ `module.hot` API æŽ¥å…¥è¿™ä¸ªå¤„ç†ï¼Œå®ƒèƒ½åœ¨ä¸€ä¸ªæ¨¡å—å³å°†è¢«å¤„ç†æˆ–è€…æœ‰æ–°çš„ä»£ç ç‰ˆæœ¬æ—¶é€šçŸ¥ä½ ã€‚åƒ [react-hot-loader](https://github.com/gaearon/react-hot-loader)è¿™æ ·çš„é¡¹ç›®å¯ä»¥å¸®åŠ©å¤„ç†ï¼Œå¹¶ä¸”é€šè¿‡ Parcel å¼€ç®±å³ç”¨ã€‚

è¿™æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥äº†è§£ï¼š`module.hot.accept` å’Œ `module.hot.dispose`ã€‚é€šè¿‡è°ƒç”¨å¸¦æœ‰ä¸€ä¸ªå›žè°ƒå‡½æ•°çš„ `module.hot.accept`ï¼Œå›žè°ƒå‡½æ•°åœ¨æ¨¡å—æ‘¸ç€ä»»ä½•ä¾èµ–å‡çº§æ—¶æ‰§è¡Œã€‚`module.hot.dispose` æŽ¥æ”¶ä¸€ä¸ªå›žè°ƒå‡½æ•°ï¼Œå›žè°ƒå‡½æ•°å½“æ¨¡å—å³å°†è¢«æ›¿æ¢æ—¶è°ƒç”¨ã€‚

```JavaScript
if (module.hot) {
  module.hot.dispose(function () {
    // module is about to be replaced
  });

  module.hot.accept(function () {
    // module or one of its dependencies was just updated
  });
}
```

## å®‰å…¨ä¹¦å†™ï¼ˆSafe Writeï¼‰

ä¸€äº›æ–‡æœ¬ç¼–è¯‘å™¨å’Œ IDE æœ‰ä¸€ä¸ªå«åš `Safe Write` çš„åŠŸèƒ½ï¼Œé€šè¿‡ä¿å­˜æ–‡ä»¶æ—¶å¤åˆ¶å¹¶é‡å‘½åæ–‡ä»¶æ¥äº†é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚

åœ¨ä½¿ç”¨çƒ­æ¨¡å—æ›´æ–°ï¼ˆHMRï¼‰æ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½ä¼šé˜»æ­¢æ–‡ä»¶æ›´æ–°çš„è‡ªåŠ¨ç›‘å¬ã€‚è¦ç¦ç”¨ `Safe Write` åŠŸèƒ½ï¼Œä½¿ç”¨ä»¥ä¸‹é€‰é¡¹ï¼š

 Â * * Sublime Text 3 * æ·»åŠ  `atomic_save: "false"` åˆ°ä½ çš„ç”¨æˆ·é¦–é€‰é¡¹ï¼ˆuser preferencesï¼‰ã€‚
 Â * * IntelliJ * åœ¨é¦–é€‰é¡¹ï¼ˆpreferenceï¼‰æœç´¢æ‰¾åˆ° "safe write" å¹¶ç¦ç”¨å®ƒã€‚
 Â * * Vim * æ·»åŠ  :set backupcopy=yes åˆ°ä½ çš„è®¾ç½®ï¼ˆsettingsï¼‰ã€‚
 Â * * WebStorm * å–æ¶ˆé€‰ä¸­ "safe write" åœ¨ Preferences > Appearance & Behavior > System Settings é‡Œã€‚
